<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Makine Bulucu</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Makine Bul">
    <meta name="theme-color" content="#007AFF"/>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f4f4f9; color: #333; }
        .container { max-width: 600px; margin: 0 auto; background: #fff; padding: 20px; min-height: 100vh; box-sizing: border-box; }
        h1 { color: #444; text-align: center; margin-top: 10px; margin-bottom: 20px; }
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        .button-group { display: flex; gap: 10px; margin-bottom: 20px; }
        button { flex-grow: 1; padding: 14px; background-color: #007AFF; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; -webkit-appearance: none; }
        #qr-reader-button { background-color: #34C759; }
        #result { margin-top: 20px; padding: 15px; background-color: #eef7ff; border-left: 5px solid #007AFF; min-height: 50px; font-size: 1.1em; word-wrap: break-word; border-radius: 4px; }
        #qr-reader { width: 100%; margin-top: 20px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
        #qr-reader-button-stop { display: none; width: 100%; margin-top: 10px; background-color: #FF3B30; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Makine Bulucu</h1>
        <input type="text" id="partNumberInput" placeholder="Parça Numarasýný Girin...">
        <div class="button-group">
            <button id="searchButton">Ara</button>
            <button id="qr-reader-button">QR Kod Tara</button>
        </div>
        <div id="qr-reader"></div>
        <button id="qr-reader-button-stop">Taramayý Durdur</button>
        <div id="result">Uygulama hazýr.</div>
    </div>

    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script>
        <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); });
    }

    // YENÝ VE GENÝÞLETÝLMÝÞ VERÝ LÝSTENÝZ
    const partData = [
        [62900, 6397185800],
        [62905, 4212497801],
        [62925, 4211764809],
        [62903, 4412275809],
        [62912, 4220944809],
        [62918, 4211749809],
        [62923, 4014783801],
        [62922, 6327109809],
        [62901, 4412293809],
        [62906, 6501363601],
        [62909, 6397828809],
        [62913, 6001802829],
        [62914, 4221333809],
        [62916, 6397864809],
        [62917, 4220127809],
        [62919, 6340033809],
        [62924, 6454024609],
        [62915, 4412295809],
        [62904, 4014861809],
        [62912, 6414204609],
        [62907, 6001164809],
        [62912, 6422007609],
        [62916, 6404101609],
        [62905, 6397190809],
        [62907, 6001165809],
        [62915, 1000482401],
        [62912, 6424128609],
        [62904, 6001643811],
        [62924, 6000657819],
        [62915, 4014986809],
        [62914, 6000638809],
        [62912, 6317066801],
        [62922, 6502353601],
        [62900, 6397184800],
        [62914, 6328000801],
        [62901, 6397395809],
        [62906, 4220612801],
        [62904, 4211886809],
        [62919, 6390190809],
        [62914, 4220991801],
        [62915, 4014457809],
        [62905, 6000667811],
        [62918, 6414177609],
        [62904, 6502518609],
        [62922, 4220960809],
        [62918, 4212084320],
        [62916, 6414162609],
        [62914, 4221332809],
        [62916, 4014283801],
        [62905, 6394007320],
        [62913, 6397386809],
        [62918, 6414368809],
        [62915, 4210664809],
        [62900, 4230620809],
        [62925, 4212527809],
        [62924, 4011975801],
        [62912, 6327752809],
        [62915, 6414166609],
        [62915, 4212619809],
        [62914, 4212080809],
        [62905, 4011958809],
        [62903, 6001709811],
        [62912, 4212234809],
        [62914, 6327521801],
        [62904, 6000987817],
        [62925, 4014376809],
        [62904, 6500048609],
        [62916, 5001013600],
        [62904, 6397415809],
        [62913, 4212313809],
        [62916, 4212191801],
        [62912, 4230756809],
        [62905, 4211258809],
        [62913, 4210490809],
        [62905, 6424104601],
        [62903, 6397695809],
        [62905, 6000754809],
        [62916, 4212755809],
        [62914, 6397824809],
        [62905, 6307197809],
        [62904, 4210909809],
        [62914, 6307180809],
        [62912, 6327499809],
        [62914, 6397486806],
        [62901, 4412103809],
        [62915, 4210964807],
        [62918, 4211932809],
        [62919, 4230427809],
        [62914, 4015148809],
        [62909, 6397453809],
        [62916, 4212523809],
        [62918, 4014282801],
        [62914, 4012498801],
        [62925, 4221158809],
        [62916, 6317377809],
        [62913, 6327448809],
        [62912, 4221133809],
        [62918, 6414131609],
        [62924, 4200510809],
        [62904, 4221164809],
        [62916, 4230077809],
        [62913, 6424094609],
        [62913, 6397198809],
        [62909, 6327522809],
        [62914, 4221259809],
        [62905, 6317363809],
        [62924, 4012233809],
        [62915, 4211457809],
        [62919, 4211882809],
        [62905, 6414139601],
        [62915, 4014251809],
        [62900, 6424006601],
        [62905, 6001678809],
        [62904, 4220166801],
        [62900, 6001732811],
        [62904, 6424146609],
        [62903, 6328863809],
        [62912, 4212615809],
        [62905, 4211846809],
        [62912, 6327602809],
        [62913, 6327607809],
        [62905, 4201016807],
        [62912, 4211735809],
        [62915, 4200580809],
        [62916, 5000988607],
        [62905, 6307062809],
        [62919, 6397193809],
        [62925, 6317076809],
        [62900, 6001202409],
        [62919, 6397194801],
        [62923, 6009160819],
        [62915, 4211681809],
        [62907, 6002142814],
        [62916, 6002020819],
        [62918, 4212677801],
        [62912, 4221300809],
        [62901, 4211841809],
        [62904, 4212350809],
        [62903, 6002198819],
        [62903, 6327449809],
        [62914, 4212580804],
        [62905, 4201213809],
        [62915, 4014767806],
        [62915, 4211825806],
        [62912, 6397131329],
        [62905, 6317265809],
        [62912, 4211195801],
        [62914, 6001971806],
        [62914, 4212609809],
        [62912, 6001805811],
        [62916, 4212718804],
        [62905, 6397209809],
        [62915, 6327055809],
        [62916, 4220947809],
        [62914, 6327418809],
        [62912, 6000807811],
        [62912, 6327696809],
        [62905, 4260209809],
        [62906, 4013586809],
        [62909, 4212351809],
        [62914, 4211211809],
        [62905, 4014823809],
        [62909, 6397508809],
        [62925, 6397228801],
        [62912, 5000183601],
        [62916, 6002120320],
        [62912, 6000546601],
        [62912, 4260170809],
        [62916, 4212233809],
        [62904, 6307171809],
        [62912, 4211887809],
        [62906, 4212353809],
        [62905, 6307067809],
        [62916, 4011003803],
        [62912, 4211842801],
        [62903, 6327702809],
        [62909, 4221410809],
        [62904, 6404111601],
        [62906, 6500215809],
        [62904, 4013168809],
        [62901, 4230541801],
        [62914, 4212338809],
        [62904, 6414028601],
        [62925, 4410416809],
        [62917, 6404109601],
        [62918, 5000233601],
        [62912, 4212192801],
        [62914, 4211408800],
        [62904, 4212617809],
        [62918, 6002190809],
        [62915, 6335002809],
        [62919, 6397192809],
        [62909, 4212525809],
        [62912, 5040289320],
        [62912, 5000999609],
        [62925, 6001143819],
        [62914, 4015067809],
        [62925, 6307247801],
        [62925, 6000990819],
        [62912, 5000989609],
        [62916, 4220592801],
        [62912, 4234622809],
        [62905, 4220909809],
        [62916, 4212508800],
        [62916, 4220658809],
        [62907, 6002042809],
        [62905, 4015019804],
        [62916, 4212593809],
        [62912, 4014394809],
        [62916, 6327603809],
        [62901, 4250042809],
        [62912, 4014811801],
        [62919, 4230771809],
        [62900, 6307081800],
        [62912, 4212316809],
        [62917, 5080034609],
        [62913, 4014688801],
        [62917, 4221095806],
        [62912, 6397827801],
        [62905, 6404108601],
        [62912, 4212628809],
        [62919, 4239530801],
        [62912, 4211408809],
        [62919, 4412292809],
        [62922, 4210831809],
        [62905, 4013756809],
        [62912, 4220875801],
        [62925, 5000383609],
        [62925, 6001778320],
        [62917, 6414147609],
        [62905, 6000441810],
        [62900, 4201020800],
        [62925, 6001516809],
        [62905, 6414363609],
        [62912, 6002138819],
        [62907, 6001649809],
        [62917, 6001660819],
        [62912, 4220934809],
        [62903, 6001161811],
        [62918, 4224727809],
        [62907, 6001506807],
        [62917, 4221429809],
        [62904, 6500162609],
        [62905, 6001166819],
        [62905, 4211818809],
        [62905, 4014709809],
        [62901, 6500606601],
        [62919, 6327722809],
        [62904, 4010367320],
        [62912, 6317330809],
        [62900, 4201043809],
        [62915, 4220708809],
        [62900, 6414181609],
        [62912, 4221139801],
        [62912, 4211826809],
        [62900, 6000649810],
        [62915, 6001561811],
        [62917, 6001708809],
        [62900, 6397459800],
        [62905, 6414193609],
        [62915, 4212800809],
        [62917, 4211262801],
        [62917, 4229525801],
        [62905, 4200620809],
        [62905, 6001786809],
        [62906, 4221284809],
        [62915, 6424111601],
        [62900, 4211924809],
        [62915, 4220709809],
        [62915, 4210741809],
        [62901, 4015090809],
        [62923, 1000137601],
        [62905, 4221070800],
        [62914, 4221027809],
        [62917, 4212212809],
        [62900, 6001150810],
        [62903, 6327402809],
        [62914, 4212081804],
        [62912, 6327084801],
        [62905, 6001785819],
        [62912, 4212592809],
        [62905, 6820001806],
        [62915, 4221283801],
        [62900, 6000944340],
        [62912, 6501503609],
        [62912, 4230325801],
        [62906, 6317310809],
        [62915, 6414366609],
        [62917, 6397505809],
        [62912, 6397516809],
        [62912, 6320023801],
        [62917, 4200456801],
        [62906, 6424112609],
        [62906, 4221303809],
        [62919, 6001716819],
        [62912, 4221492804],
        [62918, 4220288801],
        [62901, 6002219819],
        [62905, 4212703809],
        [62905, 6001662809],
        [62916, 6397825809],
        [62907, 6300119809],
        [62914, 6001496809],
        [62919, 6001659819],
        [62916, 4015191809],
        [62901, 6414185609],
        [62918, 6001723809],
        [62914, 6009133819],
        [62914, 6307216809],
        [62918, 5000391609],
        [62905, 4212230801],
        [62914, 6001306819],
        [62916, 4014825809],
        [62916, 4013698809],
        [62916, 4210397809],
        [62905, 4212787809],
        [62912, 4014622807],
        [62918, 4230260809],
        [62901, 6001711320],
        [62918, 4212507800],
        [62914, 4015116809],
        [62923, 6327366809],
        [62912, 6002139819],
        [62905, 4220764329],
        [62918, 5001041609],
        [62917, 4212801809],
        [62916, 4221464809],
        [62923, 4230811809],
        [62917, 4220675809],
        [62916, 6404131609],
        [62916, 4221161809],
        [62912, 6414367601],
        [62903, 4411370809],
        [62917, 4221176801],
        [62909, 4412121809],
        [62916, 6002241819],
        [62915, 6001951809],
        [62915, 4224083804],
        [62916, 4010106801],
        [62900, 6429520601],
        [62900, 6424123601],
        [62915, 6001356810],
        [62905, 1000422807],
        [62916, 4230109809],
        [62915, 4212806809],
        [62917, 6414172609],
        [62917, 4015195809],
        [62917, 4014592801],
        [62916, 4212345809],
        [62912, 4221503320],
        [62924, 4221320801],
        [62918, 4211262809],
        [62916, 4210501809],
        [62923, 4212722804],
        [62919, 6005167819],
        [62917, 4211914809],
        [62904, 4015068809],
        [62904, 6307108809],
        [62905, 4014689801],
        [62915, 4014070809],
        [62917, 6002141819],
        [62912, 4230103801],
        [62904, 6000598409],
        [62918, 5000399609],
        [62916, 4212698809],
        [62924, 6001571811],
        [62914, 4230830809],
        [62916, 6501530601],
        [62916, 4230772809],
        [62914, 4212321809],
        [62916, 6307089806],
        [62917, 4010480800]
    ];

    const partNumberInput = document.getElementById('partNumberInput');
    const searchButton = document.getElementById('searchButton');
    const qrReaderButton = document.getElementById('qr-reader-button');
    const qrStopButton = document.getElementById('qr-reader-button-stop');
    const resultDiv = document.getElementById('result');
    const qrReaderDiv = document.getElementById('qr-reader');
    let html5QrCode = new Html5Qrcode("qr-reader");

    function findMachineByPartNumber(partNumber) {
        const trimmedPartNumber = partNumber.toString().trim();
        if (!trimmedPartNumber) { resultDiv.textContent = 'Lütfen bir parça numarasý girin.'; return; }
        const machines = partData.filter(row => row[1] && row[1].toString().trim() === trimmedPartNumber).map(row => row[0]);
        if (machines.length > 0) {
            resultDiv.innerHTML = `<strong>Parça No:</strong> ${trimmedPartNumber}<br><strong>Makineler:</strong> ${[...new Set(machines)].join(', ')}`;
        } else {
            resultDiv.textContent = `"${trimmedPartNumber}" için makine bulunamadý.`;
        }
    }

    const startQRScanner = () => {
        qrReaderDiv.style.display = 'block';
        qrStopButton.style.display = 'block';
        const config = { fps: 10, qrbox: { width: 250, height: 250 }, aspectRatio: 1.0 };
        const qrCodeSuccessCallback = (decodedText, decodedResult) => {
            partNumberInput.value = decodedText;
            stopQRScanner();
            findMachineByPartNumber(decodedText);
        };
        html5QrCode.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
    };

    const stopQRScanner = () => {
        html5QrCode.stop().then(() => {
            qrReaderDiv.style.display = 'none';
            qrStopButton.style.display = 'none';
        }).catch(err => console.log("Tarayýcý zaten durdurulmuþ olabilir."));
    };

    searchButton.addEventListener('click', () => findMachineByPartNumber(partNumberInput.value));
    partNumberInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') findMachineByPartNumber(partNumberInput.value); });
    qrReaderButton.addEventListener('click', startQRScanner);
    qrStopButton.addEventListener('click', stopQRScanner);
</script>    
</body>
</html>